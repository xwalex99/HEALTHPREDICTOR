<div class="page-center">
	<div class="container-terciario card chat-wrapper">
		<div class="chat-container">
			<div class="chat-header">
				<h2>Chat de Salud</h2>
				<p>Pregunta tus dudas médicas (esto no sustituye a un profesional).</p>
			</div>

			<div class="chat-messages" role="log" aria-live="polite">
				<ng-container *ngFor="let m of messages">
					<div class="message" [ngClass]="m.sender === 'bot' ? 'bot-message' : 'user-message'">
						<p>{{ m.text }}</p>
						<small class="msg-time">{{ m.time | date:'shortTime' }}</small>
					</div>
				</ng-container>
				<div *ngIf="isLoading" class="message bot-message">
					<p>Escribiendo...</p>
				</div>
			</div>

			<div *ngIf="errorMessage" class="error-text" style="padding: 0.5rem 1rem; margin-bottom: 0.5rem;">
				{{ errorMessage }}
			</div>

			<form class="chat-input-area" (submit)="sendMessage(); $event.preventDefault()">
				<input
					type="text"
					class="chat-input"
					[(ngModel)]="input"
					name="message"
					placeholder="Escribe tu pregunta médica aquí..."
					autocomplete="off"
					[disabled]="isLoading"
				/>
				<button type="submit" class="btn-principal" [disabled]="isLoading || !input?.trim()">
					{{ isLoading ? 'Enviando...' : 'Enviar' }}
				</button>
			</form>
		</div>
	</div>
</div>
